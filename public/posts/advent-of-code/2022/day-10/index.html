<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Cathode-Ray Tube | Gal.E</title><meta name=keywords content="Advent of Code,Go,Learning Go"><meta name=description content="Advent of Code day 10 solution"><meta name=author content="Gal Elmalah"><link rel=canonical href=https://personal-blog-9z4kmk1ax-galelmalah.vercel.app/posts/advent-of-code/2022/day-10/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.6cb923c56b6fe88a0f61e900dad874dd65bb59947d7a561900301be84cd05880.css integrity="sha256-bLkjxWtv6IoPYekA2th03WW7WZR9elYZADAb6EzQWIA=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://personal-blog-9z4kmk1ax-galelmalah.vercel.app/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://personal-blog-9z4kmk1ax-galelmalah.vercel.app/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://personal-blog-9z4kmk1ax-galelmalah.vercel.app/favicon-32x32.png><link rel=apple-touch-icon href=https://personal-blog-9z4kmk1ax-galelmalah.vercel.app/apple-touch-icon.png><link rel=mask-icon href=https://personal-blog-9z4kmk1ax-galelmalah.vercel.app/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="Cathode-Ray Tube"><meta property="og:description" content="Advent of Code day 10 solution"><meta property="og:type" content="article"><meta property="og:url" content="https://personal-blog-9z4kmk1ax-galelmalah.vercel.app/posts/advent-of-code/2022/day-10/"><meta property="og:image" content="https://personal-blog-9z4kmk1ax-galelmalah.vercel.app/media/aoc.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-12-13T11:59:03+00:00"><meta property="article:modified_time" content="2022-12-13T11:59:03+00:00"><meta property="og:site_name" content="Gal.E"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://personal-blog-9z4kmk1ax-galelmalah.vercel.app/media/aoc.jpg"><meta name=twitter:title content="Cathode-Ray Tube"><meta name=twitter:description content="Advent of Code day 10 solution"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://personal-blog-9z4kmk1ax-galelmalah.vercel.app/posts/"},{"@type":"ListItem","position":2,"name":"Cathode-Ray Tube","item":"https://personal-blog-9z4kmk1ax-galelmalah.vercel.app/posts/advent-of-code/2022/day-10/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Cathode-Ray Tube","name":"Cathode-Ray Tube","description":"Advent of Code day 10 solution","keywords":["Advent of Code","Go","Learning Go"],"articleBody":"Question\nCrap seems like our rope physics knowledge from yesterday didn’t help and we wound up in the river… The elves are nowhere to be found and our communication system is spitting out weird signals and noise Luckily we can probably get this device up and running in no time we just need to make a drop-in replacement for the device’s video system. To do that we need to decode the instructions from the CPU and the register value first\nWe are given the CPU output and told that each operation takes Y cycles to complete, for example:\n1 2 3 noop addx 3 addx -5 addx - takes two rounds, add the right-hand value to X noop - take one round, does nothing Parsing First, Create a new Instruction struct\n1 2 3 4 type Instruction struct { cycles int value int } Compared to previous days the parsing here is a piece of cake\n1 2 3 4 5 6 7 8 9 10 11 12 13 func parse(raw string) (instructions []*Instruction) { lines := strings.Split(string(raw), \"\\n\") for _, l := range lines { if strings.Contains(l, \"noop\") { instructions = append(instructions, \u0026Instruction{cycles: 1, value: 0}) } else { parts := strings.Split(l, \" \") instructions = append(instructions, \u0026Instruction{cycles: 2, value: util.ParseInt(parts[1])}) } } return } you might notice that our function signature is a bit weird, it ends with (instructions []Instruction) and we return nothing at the end of the function. This syntax creates a variable at the top of our function, and the last return statement is called a “naked” return, which returns instructions by default. In my opinion, it shouldn’t be used for any function with more than a couple of lines of code, instead, we should use the named variable and return instructions but for the sake of learning new things we will stick with the “naked” return (I kind of like that terminology)\nPart 1 We need to sample the value in register X*ticks in various CPU cycles, more precisly during the 20th, 60th, 100th, 140th, 180th, and 220th cycles and sum them up\nThere is no kind of gotchas in these sort of questions (usually), most simulation question just needs to be carefully read and then directly apply the instructions in the code\nDirectly from AoC addx V takes two cycles to complete. After two cycles, the X register is increased by the value V. (V can be negative. noop takes one cycle to complete. It has no other effect.\nthe thing to note here is that the instruction value takes effect only after the specific number of cycles has passed\nSo what does our solution needs to do?\nGo over each instruction Keep track of the system ticks (not the same as cycle) Keep track of X Sample X in each one of the intervals Run each instruction Y number of cycles Update X after each instruction We are adding a notion of ticks, ticks happen on every run regardless of the number of cycles an instructions should take\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 func Part1(raw string) int { instructions := parse(raw) x := 1 result := 0 ticks := 0 for _, ci := range instructions { for j := 0; j \u003c ci.cycles; j++ { ticks++ // updating ticks on every cycle if ticks%20 == 0 \u0026\u0026 ticks%40 != 0 { result += x * ticks } } x += ci.value } return result } Part 2 using the value of X during each tick we need to draw some stuff to the screen Our screen is 40 pixels wide and its height is 6 pixels\nThere is no notion of vertical positions, meaning that our x value needs to be translated to the range we defined above 40*6\nWe are told there is a sprite 3 pixels long and the x value determines her center position. During each cycle we bump our location in the screen, if the current position includes the currently drawn pixel we say it lit and draw # otherwise its dark and we draw .\nThe output of this should be a sequence of chars and that will be our answer! How cool is that right?\nThis question is a bit trickier than part 1 but still, the main thing is to read the instructions carefully and translate them back into code\nFirst, lets create a screen!\n1 2 3 4 5 6 7 8 9 10 11 12 13 func printCrt(crt [][]string) { for i, r := range crt { fmt.Println(i, r) } } func makeCrt() [][]string { crt := make([][]string, 6) for i, _ := range crt { crt[i] = make([]string, 40) } return crt } Next comes our logic\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 func Part2(raw string) { instructions := parse(raw) crt := makeCrt() x := 1 ticks := 0 for _, ci := range instructions { for j := 0; j \u003c ci.cycles; j++ { row := int(ticks / 40) col := ticks % 40 d := util.Abs(col - x) if d \u003c 2 { crt[row][col] = \"#\" } else { crt[row][col] = \".\" } ticks++ } x += ci.value } print(crt) } Not everything here is obvious so let’s go over the tricky lines one by one:\nrow := int(ticks / 40) - we know that each row is 40 long, so we can divide the number ticks by the width of each row to determine in each row we should be relative to our CRT e.g 30/40 -\u003e 0, 90/40 -\u003e 2 etc..\ncol := ticks%40 - we have a “window” with a length of 40 and a value that is increasing but we still want to fall into that bucker of values e.g 30%40 -\u003e 30, 50%40 -\u003e 10 (second row 10th pixel), 220%40 -\u003e 20 etc…\nd := util.Abs(col - x) - our delta from the center of the sprite, if its smaller than 2 (remember that x is the center of the sprite) we draw a lit pixel, otherwise we draw a dark pixel\nWith my input I got the following output, what about you? That’s it for today, see you tomorrow ⭐️\nYou can find the complete code here Thanks for reading!\n","wordCount":"1065","inLanguage":"en","image":"https://personal-blog-9z4kmk1ax-galelmalah.vercel.app/media/aoc.jpg","datePublished":"2022-12-13T11:59:03Z","dateModified":"2022-12-13T11:59:03Z","author":{"@type":"Person","name":"Gal Elmalah"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://personal-blog-9z4kmk1ax-galelmalah.vercel.app/posts/advent-of-code/2022/day-10/"},"publisher":{"@type":"Organization","name":"Gal.E","logo":{"@type":"ImageObject","url":"https://personal-blog-9z4kmk1ax-galelmalah.vercel.app/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://personal-blog-9z4kmk1ax-galelmalah.vercel.app/ accesskey=h title="Home (Alt + H)"><img src=https://personal-blog-9z4kmk1ax-galelmalah.vercel.app/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://personal-blog-9z4kmk1ax-galelmalah.vercel.app/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://personal-blog-9z4kmk1ax-galelmalah.vercel.app/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://personal-blog-9z4kmk1ax-galelmalah.vercel.app/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://personal-blog-9z4kmk1ax-galelmalah.vercel.app/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://personal-blog-9z4kmk1ax-galelmalah.vercel.app/>Home</a>&nbsp;»&nbsp;<a href=https://personal-blog-9z4kmk1ax-galelmalah.vercel.app/posts/>Posts</a></div><h1 class=post-title>Cathode-Ray Tube</h1><div class=post-description>Advent of Code day 10 solution</div><div class=post-meta><span title='2022-12-13 11:59:03 +0000 +0000'>December 13, 2022</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;1065 words&nbsp;·&nbsp;Gal Elmalah&nbsp;|&nbsp;<a href=https://github.com/galElmalah/personal-blog/tree/master/content/posts/advent-of-code/2022/day-10/index.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><figure class=entry-cover><img loading=lazy srcset="https://personal-blog-9z4kmk1ax-galelmalah.vercel.app/posts/advent-of-code/2022/day-10/media/aoc_hua29305eba7f26a68f840ecad02fe16a4_598118_360x0_resize_q75_box.jpg 360w ,https://personal-blog-9z4kmk1ax-galelmalah.vercel.app/posts/advent-of-code/2022/day-10/media/aoc_hua29305eba7f26a68f840ecad02fe16a4_598118_480x0_resize_q75_box.jpg 480w ,https://personal-blog-9z4kmk1ax-galelmalah.vercel.app/posts/advent-of-code/2022/day-10/media/aoc_hua29305eba7f26a68f840ecad02fe16a4_598118_720x0_resize_q75_box.jpg 720w ,https://personal-blog-9z4kmk1ax-galelmalah.vercel.app/posts/advent-of-code/2022/day-10/media/aoc_hua29305eba7f26a68f840ecad02fe16a4_598118_1080x0_resize_q75_box.jpg 1080w ,https://personal-blog-9z4kmk1ax-galelmalah.vercel.app/posts/advent-of-code/2022/day-10/media/aoc_hua29305eba7f26a68f840ecad02fe16a4_598118_1500x0_resize_q75_box.jpg 1500w ,https://personal-blog-9z4kmk1ax-galelmalah.vercel.app/posts/advent-of-code/2022/day-10/media/aoc.jpg 2400w" sizes="(min-width: 768px) 720px, 100vw" src=https://personal-blog-9z4kmk1ax-galelmalah.vercel.app/posts/advent-of-code/2022/day-10/media/aoc.jpg alt=trees width=2400 height=1800></figure><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#parsing aria-label=Parsing>Parsing</a></li><li><a href=#part-1 aria-label="Part 1">Part 1</a></li><li><a href=#part-2 aria-label="Part 2">Part 2</a><ul><li><a href=#with-my-input-i-got-the-following-output-what-about-you aria-label="With my input I got the following output, what about you?">With my input I got the following output, what about you?</a></li></ul></li></ul></div></details></div><div class=post-content><p><a href=https://adventofcode.com/2022/day/10>Question</a></p><p>Crap seems like our rope physics knowledge from yesterday didn&rsquo;t help and we wound up in the river&mldr;
The elves are nowhere to be found and our communication system is spitting out weird signals and noise
Luckily we can probably get this device up and running in no time we just need to make a drop-in replacement for the device&rsquo;s video system.
To do that we need to decode the instructions from the CPU and the register value first</p><p>We are given the CPU output and told that each operation takes <code>Y</code> cycles to complete, for example:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>noop
</span></span><span class=line><span class=cl>addx 3
</span></span><span class=line><span class=cl>addx -5
</span></span></code></pre></td></tr></table></div></div><ul><li>addx - takes two rounds, add the right-hand value to X</li><li>noop - take one round, does nothing</li></ul><h3 id=parsing>Parsing<a hidden class=anchor aria-hidden=true href=#parsing>#</a></h3><p>First, Create a new <code>Instruction</code> struct</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>type</span> <span class=nx>Instruction</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>cycles</span> <span class=kt>int</span>
</span></span><span class=line><span class=cl>  <span class=nx>value</span>  <span class=kt>int</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Compared to previous days the parsing here is a piece of cake</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=nf>parse</span><span class=p>(</span><span class=nx>raw</span> <span class=kt>string</span><span class=p>)</span> <span class=p>(</span><span class=nx>instructions</span> <span class=p>[]</span><span class=o>*</span><span class=nx>Instruction</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>lines</span> <span class=o>:=</span> <span class=nx>strings</span><span class=p>.</span><span class=nf>Split</span><span class=p>(</span><span class=nb>string</span><span class=p>(</span><span class=nx>raw</span><span class=p>),</span> <span class=s>&#34;\n&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>for</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>l</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>lines</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>strings</span><span class=p>.</span><span class=nf>Contains</span><span class=p>(</span><span class=nx>l</span><span class=p>,</span> <span class=s>&#34;noop&#34;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>instructions</span> <span class=p>=</span> <span class=nb>append</span><span class=p>(</span><span class=nx>instructions</span><span class=p>,</span> <span class=o>&amp;</span><span class=nx>Instruction</span><span class=p>{</span><span class=nx>cycles</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span> <span class=nx>value</span><span class=p>:</span> <span class=mi>0</span><span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>parts</span> <span class=o>:=</span> <span class=nx>strings</span><span class=p>.</span><span class=nf>Split</span><span class=p>(</span><span class=nx>l</span><span class=p>,</span> <span class=s>&#34; &#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=nx>instructions</span> <span class=p>=</span> <span class=nb>append</span><span class=p>(</span><span class=nx>instructions</span><span class=p>,</span> <span class=o>&amp;</span><span class=nx>Instruction</span><span class=p>{</span><span class=nx>cycles</span><span class=p>:</span> <span class=mi>2</span><span class=p>,</span> <span class=nx>value</span><span class=p>:</span> <span class=nx>util</span><span class=p>.</span><span class=nf>ParseInt</span><span class=p>(</span><span class=nx>parts</span><span class=p>[</span><span class=mi>1</span><span class=p>])})</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>you might notice that our function signature is a bit weird, it ends with <code>(instructions []Instruction)</code> and we return nothing at the end of the function.
This syntax creates a variable at the top of our function, and the last return statement is called a &ldquo;naked&rdquo; return, which returns <code>instructions</code> by default.
In my opinion, it shouldn&rsquo;t be used for any function with more than a couple of lines of code, instead, we should use the named variable and <code>return instructions</code> but for the sake of learning new things we will stick with the &ldquo;naked&rdquo; return (I kind of like that terminology)</p><h3 id=part-1>Part 1<a hidden class=anchor aria-hidden=true href=#part-1>#</a></h3><p>We need to sample the value in register X*ticks in various CPU cycles, more precisly during the <code>20th, 60th, 100th, 140th, 180th, and 220th</code> cycles and sum them up</p><p>There is no kind of gotchas in these sort of questions (usually), most simulation question just needs to be carefully read and then directly apply the instructions in the code</p><p><strong>Directly from AoC</strong>
<em>addx V takes two cycles to complete. <strong>After</strong> two cycles, the X register is increased by the value V. (V can be negative.</em>
<em>noop takes one cycle to complete. It has no other effect.</em></p><p>the thing to note here is that the instruction value takes effect only <strong>after</strong> the specific number of cycles has passed</p><p>So what does our solution needs to do?</p><ol><li>Go over each instruction</li><li>Keep track of the system <code>ticks</code> (not the same as cycle)</li><li>Keep track of X</li><li>Sample X in each one of the intervals</li><li>Run each instruction Y number of cycles</li><li>Update X after each instruction</li></ol><p>We are adding a notion of <code>ticks</code>, ticks happen on every run regardless of the number of cycles an instructions should take</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=nf>Part1</span><span class=p>(</span><span class=nx>raw</span> <span class=kt>string</span><span class=p>)</span> <span class=kt>int</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>instructions</span> <span class=o>:=</span> <span class=nf>parse</span><span class=p>(</span><span class=nx>raw</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=nx>x</span> <span class=o>:=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>  <span class=nx>result</span> <span class=o>:=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>  <span class=nx>ticks</span> <span class=o>:=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>  <span class=k>for</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>ci</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>instructions</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>j</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>j</span> <span class=p>&lt;</span> <span class=nx>ci</span><span class=p>.</span><span class=nx>cycles</span><span class=p>;</span> <span class=nx>j</span><span class=o>++</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>ticks</span><span class=o>++</span> <span class=c1>// updating ticks on every cycle
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=k>if</span> <span class=nx>ticks</span><span class=o>%</span><span class=mi>20</span> <span class=o>==</span> <span class=mi>0</span> <span class=o>&amp;&amp;</span> <span class=nx>ticks</span><span class=o>%</span><span class=mi>40</span> <span class=o>!=</span> <span class=mi>0</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>result</span> <span class=o>+=</span> <span class=nx>x</span> <span class=o>*</span> <span class=nx>ticks</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>x</span> <span class=o>+=</span> <span class=nx>ci</span><span class=p>.</span><span class=nx>value</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>result</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=part-2>Part 2<a hidden class=anchor aria-hidden=true href=#part-2>#</a></h3><p>using the value of X during each tick we need to draw some stuff to the screen
Our screen is 40 pixels wide and its height is 6 pixels</p><p>There is no notion of vertical positions, meaning that our x value needs to be translated to the range we defined above 40*6</p><p>We are told there is a <code>sprite</code> 3 pixels long and the <code>x</code> value determines her center position.
During each cycle we bump our location in the screen, if the current position includes the currently drawn pixel we say it <em>lit</em> and draw <code>#</code> otherwise its <em>dark</em> and we draw <code>.</code></p><p>The output of this should be a sequence of chars and that will be our answer! How cool is that right?</p><p>This question is a bit trickier than part 1 but still, the main thing is to read the instructions carefully and translate them back into code</p><p>First, lets create a screen!</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=nf>printCrt</span><span class=p>(</span><span class=nx>crt</span> <span class=p>[][]</span><span class=kt>string</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>for</span> <span class=nx>i</span><span class=p>,</span> <span class=nx>r</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>crt</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>i</span><span class=p>,</span> <span class=nx>r</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>makeCrt</span><span class=p>()</span> <span class=p>[][]</span><span class=kt>string</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>crt</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>([][]</span><span class=kt>string</span><span class=p>,</span> <span class=mi>6</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=k>for</span> <span class=nx>i</span><span class=p>,</span> <span class=nx>_</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>crt</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>crt</span><span class=p>[</span><span class=nx>i</span><span class=p>]</span> <span class=p>=</span> <span class=nb>make</span><span class=p>([]</span><span class=kt>string</span><span class=p>,</span> <span class=mi>40</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>crt</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Next comes our logic</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=nf>Part2</span><span class=p>(</span><span class=nx>raw</span> <span class=kt>string</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>instructions</span> <span class=o>:=</span> <span class=nf>parse</span><span class=p>(</span><span class=nx>raw</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=nx>crt</span> <span class=o>:=</span> <span class=nf>makeCrt</span><span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=nx>x</span> <span class=o>:=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>  <span class=nx>ticks</span> <span class=o>:=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>  <span class=k>for</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>ci</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>instructions</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>j</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>j</span> <span class=p>&lt;</span> <span class=nx>ci</span><span class=p>.</span><span class=nx>cycles</span><span class=p>;</span> <span class=nx>j</span><span class=o>++</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>row</span> <span class=o>:=</span> <span class=nb>int</span><span class=p>(</span><span class=nx>ticks</span> <span class=o>/</span> <span class=mi>40</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=nx>col</span> <span class=o>:=</span> <span class=nx>ticks</span> <span class=o>%</span> <span class=mi>40</span>
</span></span><span class=line><span class=cl>      <span class=nx>d</span> <span class=o>:=</span> <span class=nx>util</span><span class=p>.</span><span class=nf>Abs</span><span class=p>(</span><span class=nx>col</span> <span class=o>-</span> <span class=nx>x</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=nx>d</span> <span class=p>&lt;</span> <span class=mi>2</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>crt</span><span class=p>[</span><span class=nx>row</span><span class=p>][</span><span class=nx>col</span><span class=p>]</span> <span class=p>=</span> <span class=s>&#34;#&#34;</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>crt</span><span class=p>[</span><span class=nx>row</span><span class=p>][</span><span class=nx>col</span><span class=p>]</span> <span class=p>=</span> <span class=s>&#34;.&#34;</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=nx>ticks</span><span class=o>++</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>x</span> <span class=o>+=</span> <span class=nx>ci</span><span class=p>.</span><span class=nx>value</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nb>print</span><span class=p>(</span><span class=nx>crt</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Not everything here is obvious so let&rsquo;s go over the tricky lines one by one:</p><p><strong><code>row := int(ticks / 40)</code></strong> - we know that each row is 40 long, so we can divide the number ticks by the width of each row to determine in each row we should be relative to our CRT e.g <code>30/40 -> 0, 90/40 -> 2</code> etc..</p><p><strong><code>col := ticks%40</code></strong> - we have a &ldquo;window&rdquo; with a length of 40 and a value that is increasing but we still want to fall into that bucker of values e.g <code>30%40 -> 30, 50%40 -> 10 (second row 10th pixel), 220%40 -> 20</code> etc&mldr;</p><p><strong><code>d := util.Abs(col - x)</code></strong> - our delta from the center of the sprite, if its smaller than 2 (remember that x is the center of the sprite) we draw a <em>lit</em> pixel, otherwise we draw a <em>dark</em> pixel</p><h4 id=with-my-input-i-got-the-following-output-what-about-you>With my input I got the following output, what about you?<a hidden class=anchor aria-hidden=true href=#with-my-input-i-got-the-following-output-what-about-you>#</a></h4><p><img loading=lazy src=./media/output.png alt="solution output"></p><hr><p>That&rsquo;s it for today, see you tomorrow ⭐️</p><p>You can find the complete code <a href=https://github.com/galElmalah/aoc-2022/tree/master/day-10>here</a>
Thanks for reading!</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://personal-blog-9z4kmk1ax-galelmalah.vercel.app/tags/advent-of-code/>Advent of Code</a></li><li><a href=https://personal-blog-9z4kmk1ax-galelmalah.vercel.app/tags/go/>Go</a></li><li><a href=https://personal-blog-9z4kmk1ax-galelmalah.vercel.app/tags/learning-go/>Learning Go</a></li></ul><nav class=paginav><a class=prev href=https://personal-blog-9z4kmk1ax-galelmalah.vercel.app/posts/advent-of-code/2022/day-12/><span class=title>« Prev</span><br><span>Hill Climbing Algorithm</span></a>
<a class=next href=https://personal-blog-9z4kmk1ax-galelmalah.vercel.app/posts/advent-of-code/2022/day-9/><span class=title>Next »</span><br><span>Rope Bridge</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Cathode-Ray Tube on twitter" href="https://twitter.com/intent/tweet/?text=Cathode-Ray%20Tube&url=https%3a%2f%2fpersonal-blog-9z4kmk1ax-galelmalah.vercel.app%2fposts%2fadvent-of-code%2f2022%2fday-10%2f&hashtags=AdventofCode%2cGo%2cLearningGo"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Cathode-Ray Tube on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fpersonal-blog-9z4kmk1ax-galelmalah.vercel.app%2fposts%2fadvent-of-code%2f2022%2fday-10%2f&title=Cathode-Ray%20Tube&summary=Cathode-Ray%20Tube&source=https%3a%2f%2fpersonal-blog-9z4kmk1ax-galelmalah.vercel.app%2fposts%2fadvent-of-code%2f2022%2fday-10%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Cathode-Ray Tube on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fpersonal-blog-9z4kmk1ax-galelmalah.vercel.app%2fposts%2fadvent-of-code%2f2022%2fday-10%2f&title=Cathode-Ray%20Tube"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Cathode-Ray Tube on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fpersonal-blog-9z4kmk1ax-galelmalah.vercel.app%2fposts%2fadvent-of-code%2f2022%2fday-10%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Cathode-Ray Tube on whatsapp" href="https://api.whatsapp.com/send?text=Cathode-Ray%20Tube%20-%20https%3a%2f%2fpersonal-blog-9z4kmk1ax-galelmalah.vercel.app%2fposts%2fadvent-of-code%2f2022%2fday-10%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Cathode-Ray Tube on telegram" href="https://telegram.me/share/url?text=Cathode-Ray%20Tube&url=https%3a%2f%2fpersonal-blog-9z4kmk1ax-galelmalah.vercel.app%2fposts%2fadvent-of-code%2f2022%2fday-10%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://personal-blog-9z4kmk1ax-galelmalah.vercel.app/>Gal.E</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>